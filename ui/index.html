<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Zapps</title>
<style>
body{margin:0;background:#0d1117;color:#e6edf3;font-family:system-ui}
header{padding:20px;display:flex;justify-content:space-between;align-items:center}
button{padding:8px 14px;border-radius:8px;border:none;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fill,140px);gap:20px;padding:20px}
.app{background:#161b22;padding:14px;border-radius:12px;text-align:center}
.app button{margin-top:6px;width:100%}
</style>
</head>
<body>

<header>
  <h2>âš¡ Zapps</h2>
  <div>
    <button onclick="checkUpdates()">ðŸ”„ Check for updates</button>
    <button onclick="showAbout()">â„¹ About</button>
    <button onclick="Zapps.open()">+ Install App</button>
  </div>
</header>

<div class="grid" id="grid"></div>

<script>
async function render() {
  const apps = await Zapps.getLibrary();
  const grid = document.getElementById("grid");
  grid.innerHTML = "";

  apps.forEach(app => {
    const div = document.createElement("div");
    div.className = "app";
    div.innerHTML = `
      <strong>${app.name}</strong><br>
      <small>v${app.version}</small><br><br>
      <button onclick="Zapps.launch('${app.id}')">â–¶ Launch</button>
      <button onclick='Zapps.pin(${JSON.stringify(app)})'>ðŸ“Œ Pin</button>
      <button onclick="removeApp('${app.id}')">ðŸ—‘ Uninstall</button>
    `;
    grid.appendChild(div);
  });
}

async function removeApp(id) {
  if (confirm("Uninstall this app?")) {
    await Zapps.uninstall(id);
    render();
  }
}

async function showAbout() {
  const a = await Zapps.about();
  alert(
    `${a.name}\n\nVersion: ${a.version}\nPlatform: ${a.platform}\nElectron: ${a.electron}`
  );
}

async function checkUpdates() {
  await Zapps.checkForUpdates();
  alert("Checking for updatesâ€¦");
}

render();
</script>

</body>
</html>
